<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRMC 전문 운동 앱</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f4f8;
            color: #333;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        h1 {
            color: #2b6cb0;
            margin-bottom: 20px;
        }

        p {
            max-width: 600px;
            margin: 0 auto 20px;
            line-height: 1.6;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            max-width: 300px;
        }

        button {
            background-color: #2b6cb0;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 15px 0;
            font-size: 16px;
            width: 100%;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #2c5282;
        }

        button:active {
            transform: scale(0.98);
        }

        .counter, .set-input-container {
            margin-top: 20px;
            font-size: 20px;
        }

        .set-input-container input {
            padding: 10px;
            font-size: 16px;
            width: 50px;
            text-align: center;
        }

        /* 반응형 디자인 */
        @media (max-width: 600px) {
            p {
                font-size: 14px;
            }

            button {
                font-size: 14px;
                padding: 12px 0;
            }
        }
    </style>
</head>
<body>
    <h1>PRMC 전문 운동 앱</h1>
    <p>
        PRMC(Pre-Royal Marines Course)는 영국 왕립 해병대에 입대하려는 지원자들을 위한 체력 및 정신력 평가 테스트입니다. 이 앱은 사용자가 운동 세트 수와 횟수를 설정하고 효과적으로 관리할 수 있게 돕습니다.
    </p>

    <div class="set-input-container">
        <label>세트 수: <input type="number" id="set-count" value="3" min="1"></label>
        <label>반복 횟수: <input type="number" id="rep-count" value="10" min="1"></label>
    </div>

    <div class="button-container">
        <button onclick="startExercise()">운동 시작</button>
        <button onclick="endExercise()">운동 종료</button>
    </div>

    <!-- 현재 진행 상태 표시 -->
    <div class="counter">
        <p>현재 세트: <span id="current-set">0</span></p>
        <p>현재 반복 횟수: <span id="current-rep">0</span></p>
        <p>타이머: <span id="exercise-timer">00:00</span></p>
    </div>

    <!-- 이전 기록 표시 -->
    <div id="record">
        <h2>이전 운동 기록</h2>
        <ul id="record-list"></ul>
    </div>

    <!-- 오디오 파일 (파일명이 정확히 일치해야 합니다) -->
    <audio id="workout-audio" src="PRMC Sit Up Test Audio.mp3" preload="auto"></audio>

    <script>
        let setCount, repCount, currentSet = 0, currentRep = 0, exerciseInterval, exerciseStartTime;

        function startExercise() {
            // 세트와 반복 횟수 초기화
            setCount = parseInt(document.getElementById('set-count').value);
            repCount = parseInt(document.getElementById('rep-count').value);
            currentSet = 1;
            currentRep = 0;
            document.getElementById('current-set').innerText = currentSet;
            document.getElementById('current-rep').innerText = currentRep;

            // 타이머 시작
            startTimer();
            exerciseStartTime = new Date();
            playAudio();
        }

        function startTimer() {
            let seconds = 0;
            clearInterval(exerciseInterval);
            exerciseInterval = setInterval(() => {
                seconds++;
                document.getElementById('exercise-timer').innerText = formatTime(seconds);
            }, 1000);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            return `${mins}:${secs}`;
        }

        function playAudio() {
            const workoutAudio = document.getElementById('workout-audio');
            workoutAudio.play().catch(error => console.error("Audio playback failed:", error));
        }

        function incrementRep() {
            if (currentRep < repCount) {
                currentRep++;
                document.getElementById('current-rep').innerText = currentRep;
            } else {
                currentSet++;
                if (currentSet > setCount) {
                    endExercise();
                } else {
                    currentRep = 1;
                    document.getElementById('current-set').innerText = currentSet;
                    document.getElementById('current-rep').innerText = currentRep;
                }
            }
        }

        function endExercise() {
            clearInterval(exerciseInterval);
            const duration = Math.floor((new Date() - exerciseStartTime) / 1000);
            saveRecord(duration, setCount, repCount);
            alert(`운동 완료! 총 ${setCount}세트, 세트당 ${repCount}회를 수행했고, ${formatTime(duration)} 동안 운동했습니다.`);
            displayRecords();
        }

        function saveRecord(duration, sets, reps) {
            const records = JSON.parse(localStorage.getItem('exerciseRecords')) || [];
            records.push({
                date: new Date().toLocaleString(),
                sets,
                reps,
                duration: formatTime(duration)
            });
            localStorage.setItem('exerciseRecords', JSON.stringify(records));
        }

        function displayRecords() {
            const records = JSON.parse(localStorage.getItem('exerciseRecords')) || [];
            const recordList = document.getElementById('record-list');
            recordList.innerHTML = '';
            records.forEach(record => {
                const li = document.createElement('li');
                li.textContent = `날짜: ${record.date}, 세트 수: ${record.sets}, 반복 횟수: ${record.reps}, 시간: ${record.duration}`;
                recordList.appendChild(li);
            });
        }

        window.onload = displayRecords;
    </script>
</body>
</html>
