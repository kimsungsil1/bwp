<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRMC 맨몸운동 테스트 오디오 재생</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f4f8;
            color: #333;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        h1 {
            color: #2b6cb0;
            margin-bottom: 20px;
        }

        p {
            max-width: 600px;
            margin: 0 auto 20px;
            line-height: 1.6;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            max-width: 300px;
        }

        button {
            background-color: #2b6cb0;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 15px 0;
            font-size: 16px;
            width: 100%;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #2c5282;
        }

        button:active {
            transform: scale(0.98);
        }

        .counter {
            margin-top: 20px;
            font-size: 20px;
        }

        /* 반응형 디자인 */
        @media (max-width: 600px) {
            p {
                font-size: 14px;
            }

            button {
                font-size: 14px;
                padding: 12px 0;
            }
        }
    </style>
</head>
<body>
    <h1>PRMC 테스트 오디오 재생</h1>
    <p>
        PRMC(Pre-Royal Marines Course)는 영국 왕립 해병대에 입대하려는 지원자들을 위한 체력 및 정신력 평가 테스트입니다. 이 테스트는 엄격한 체력 기준을 요구하며, 신체적 및 정신적 강인함을 측정하기 위해 다양한 맨몸운동을 포함합니다.
    </p>

    <div class="button-container">
        <button onclick="startExercise('situp')">윗몸일으키기 시작</button>
        <button onclick="startExercise('pullup')">턱걸이 시작</button>
        <button onclick="startExercise('pressup')">팔굽혀펴기 시작</button>
    </div>

    <!-- 카운터와 타이머 표시 -->
    <div class="counter">
        <p>운동 횟수: <span id="exercise-count">0</span></p>
        <p>타이머: <span id="exercise-timer">00:00</span></p>
    </div>

    <!-- 이전 기록 표시 -->
    <div id="record">
        <h2>이전 운동 기록</h2>
        <ul id="record-list"></ul>
    </div>

    <!-- 오디오 파일 (파일명이 정확히 일치해야 합니다) -->
    <audio id="situp-audio" src="PRMC Sit Up Test Audio.mp3" preload="auto"></audio>
    <audio id="pullup-audio" src="PRMC Pull up Test Audio.mp3" preload="auto"></audio>
    <audio id="pressup-audio" src="PRMC Press Up Test Audio.mp3" preload="auto"></audio>

    <script>
        let exerciseCount = 0;
        let exerciseInterval;
        let exerciseStartTime;

        // 타이머 초기화 및 시작 함수
        function startExercise(type) {
            exerciseCount = 0;
            document.getElementById('exercise-count').innerText = exerciseCount;
            startTimer();
            playAudio(type);
            exerciseStartTime = new Date();
        }

        // 타이머 시작
        function startTimer() {
            let seconds = 0;
            clearInterval(exerciseInterval);
            exerciseInterval = setInterval(() => {
                seconds++;
                document.getElementById('exercise-timer').innerText = formatTime(seconds);
            }, 1000);
        }

        // 시간을 00:00 형식으로 변환
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            return `${mins}:${secs}`;
        }

        // 오디오 재생 함수
        function playAudio(test) {
            const situpAudio = document.getElementById('situp-audio');
            const pullupAudio = document.getElementById('pullup-audio');
            const pressupAudio = document.getElementById('pressup-audio');

            situpAudio.pause();
            pullupAudio.pause();
            pressupAudio.pause();
            situpAudio.currentTime = 0;
            pullupAudio.currentTime = 0;
            pressupAudio.currentTime = 0;

            if (test === 'situp') {
                situpAudio.play().catch(error => console.error("Audio playback failed:", error));
            } else if (test === 'pullup') {
                pullupAudio.play().catch(error => console.error("Audio playback failed:", error));
            } else if (test === 'pressup') {
                pressupAudio.play().catch(error => console.error("Audio playback failed:", error));
            }
        }

        // 카운터 증가 함수
        function incrementCount() {
            exerciseCount++;
            document.getElementById('exercise-count').innerText = exerciseCount;
        }

        // 세트가 끝났을 때 사용자에게 피드백 및 기록 저장
        function endExercise() {
            clearInterval(exerciseInterval);
            const duration = Math.floor((new Date() - exerciseStartTime) / 1000);
            saveRecord(duration, exerciseCount);
            alert(`운동 완료! 총 ${exerciseCount}회를 수행했고, ${formatTime(duration)} 동안 운동했습니다.`);
            displayRecords();
        }

        // 기록 저장 함수
        function saveRecord(duration, count) {
            const records = JSON.parse(localStorage.getItem('exerciseRecords')) || [];
            records.push({
                date: new Date().toLocaleString(),
                count,
                duration: formatTime(duration)
            });
            localStorage.setItem('exerciseRecords', JSON.stringify(records));
        }

        // 기록 표시 함수
        function displayRecords() {
            const records = JSON.parse(localStorage.getItem('exerciseRecords')) || [];
            const recordList = document.getElementById('record-list');
            recordList.innerHTML = '';
            records.forEach(record => {
                const li = document.createElement('li');
                li.textContent = `날짜: ${record.date}, 횟수: ${record.count}, 시간: ${record.duration}`;
                recordList.appendChild(li);
            });
        }

        // 페이지 로드시 기록 표시
        window.onload = displayRecords;
    </script>
</body>
</html>
